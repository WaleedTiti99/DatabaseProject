package library;

import com.sun.glass.events.KeyEvent;
import java.awt.Image;
import java.io.File;
import java.math.BigDecimal;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import javax.swing.ImageIcon;
import javax.swing.JFileChooser;
import javax.swing.JOptionPane;
import javax.swing.filechooser.FileNameExtensionFilter;
import static library.LogIn.getMd5;

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author LENOVO
 */
public class profileJFrame extends javax.swing.JFrame {

    /**
     * Creates new form profileJFrame
     * 
     */
    String iPath="";
    String iPath2="";
    public profileJFrame() {
        initComponents();
    }
    public profileJFrame(String ID) {
        initComponents();
        try{
            jLabel3.setText(ID);
                Connection con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:oracle","library","123456"); 
                String sql="select * from MEMBER,PERSON1 where ID='"+ID+"'and MEMBERID='"+ID+"'";
                PreparedStatement ps=con.prepareStatement(sql);
                ResultSet rs=ps.executeQuery();
                if(rs.next())
                {
                    jLabel34.setText(ID);
                    fnameField.setText(rs.getString("F_NAME"));
                    lnameField.setText(rs.getString("L_NAME"));
                    phoneField.setText(rs.getString("PHONENUMBER"));
                    birthField.setText(rs.getDate("BIRTHDAY").toString());
                    userField.setText(rs.getString("USERNAME"));
                    passField.setText("PASWORD");
                    emailField.setText(rs.getString("EMAIL"));
                    jLabel2.setText("PASWORD");
                    
                    String type=rs.getString("MEM_TYPE");
                    if(type.equals("Regular"))
                        jRadioButton2.setSelected(true);
                    else
                        jRadioButton1.setSelected(true);
                    cityField.setText(rs.getString("CITY"));
                    stField.setText(rs.getString("STREET"));
                    buildField.setText(rs.getString("BUILDING"));

                }
                String sql2="select * from IMAGES where IMAGE_ID='"+ID+"'";
                PreparedStatement ps2=con.prepareStatement(sql2);
                ResultSet rs2=ps2.executeQuery();
                if(rs2.next())
                {
                    String Path=rs2.getString("IMAGE_PATH");
                    iPath2=Path;
                     ImageIcon myImage  = new ImageIcon(Path);
                     Image img = myImage.getImage();
                    Image newImg = img.getScaledInstance(jLabel34.getWidth(), jLabel34.getHeight(), Image.SCALE_SMOOTH);
                    ImageIcon image = new ImageIcon(newImg);
                     jLabel34.setIcon(image);
                }
        }
        catch(Exception e)
        {
            JOptionPane.showMessageDialog(null, e.getMessage());
        }
            
        savepBtn.setVisible(false);
        fnameField.setEditable(false);
        lnameField.setEditable(false);
        phoneField.setEditable(false);
        birthField.setEditable(false);
        userField.setEditable(false);
        passField.setEditable(false);
        emailField.setEditable(false);
        cityField.setEditable(false);
        stField.setEditable(false);
        buildField.setEditable(false);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        buttonGroup1 = new javax.swing.ButtonGroup();
        profilePanel = new javax.swing.JPanel();
        jLabel34 = new javax.swing.JLabel();
        jLabel35 = new javax.swing.JLabel();
        jLabel36 = new javax.swing.JLabel();
        phoneLabel = new javax.swing.JLabel();
        jLabel38 = new javax.swing.JLabel();
        jLabel39 = new javax.swing.JLabel();
        jLabel40 = new javax.swing.JLabel();
        jSeparator9 = new javax.swing.JSeparator();
        userLabel = new javax.swing.JLabel();
        userField = new javax.swing.JTextField();
        emailField = new javax.swing.JTextField();
        emailLabel = new javax.swing.JLabel();
        passLabel = new javax.swing.JLabel();
        passField = new javax.swing.JPasswordField();
        jSeparator10 = new javax.swing.JSeparator();
        jLabel44 = new javax.swing.JLabel();
        cityLabel = new javax.swing.JLabel();
        cityField = new javax.swing.JTextField();
        streetLabel = new javax.swing.JLabel();
        stField = new javax.swing.JTextField();
        buildingLabel = new javax.swing.JLabel();
        buildField = new javax.swing.JTextField();
        fnameField = new javax.swing.JTextField();
        lnameField = new javax.swing.JTextField();
        phoneField = new javax.swing.JTextField();
        birthField = new javax.swing.JTextField();
        updateBtn = new javax.swing.JButton();
        browseBtn = new javax.swing.JButton();
        savepBtn = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        jRadioButton1 = new javax.swing.JRadioButton();
        jRadioButton2 = new javax.swing.JRadioButton();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        profilePanel.setBackground(new java.awt.Color(255, 255, 255));

        jLabel34.setText("PP");
        jLabel34.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));

        jLabel35.setFont(new java.awt.Font("Nirmala UI", 1, 12)); // NOI18N
        jLabel35.setText("First Name:");

        jLabel36.setFont(new java.awt.Font("Nirmala UI", 1, 12)); // NOI18N
        jLabel36.setText("Last Name:");

        phoneLabel.setFont(new java.awt.Font("Nirmala UI", 1, 12)); // NOI18N
        phoneLabel.setText("Phone Number:");

        jLabel38.setFont(new java.awt.Font("Nirmala UI", 1, 12)); // NOI18N
        jLabel38.setText("Date of Birth:");

        jLabel39.setFont(new java.awt.Font("Nirmala UI", 1, 18)); // NOI18N
        jLabel39.setText("Basic Info");

        jLabel40.setFont(new java.awt.Font("Nirmala UI", 1, 18)); // NOI18N
        jLabel40.setText("Login Credentials");

        userLabel.setFont(new java.awt.Font("Nirmala UI", 1, 12)); // NOI18N
        userLabel.setText("Username:");

        userField.setFont(new java.awt.Font("Nirmala UI", 0, 12)); // NOI18N
        userField.setBorder(javax.swing.BorderFactory.createMatteBorder(0, 0, 1, 0, new java.awt.Color(0, 0, 0)));

        emailField.setFont(new java.awt.Font("Nirmala UI", 0, 12)); // NOI18N
        emailField.setBorder(javax.swing.BorderFactory.createMatteBorder(0, 0, 1, 0, new java.awt.Color(0, 0, 0)));
        emailField.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                emailFieldActionPerformed(evt);
            }
        });

        emailLabel.setFont(new java.awt.Font("Nirmala UI", 1, 12)); // NOI18N
        emailLabel.setText("Email:");

        passLabel.setFont(new java.awt.Font("Nirmala UI", 1, 12)); // NOI18N
        passLabel.setText("Password:");

        passField.setFont(new java.awt.Font("Nirmala UI", 0, 12)); // NOI18N
        passField.setBorder(javax.swing.BorderFactory.createMatteBorder(0, 0, 1, 0, new java.awt.Color(0, 0, 0)));

        jLabel44.setFont(new java.awt.Font("Nirmala UI", 1, 18)); // NOI18N
        jLabel44.setText("Address:");

        cityLabel.setFont(new java.awt.Font("Nirmala UI", 1, 12)); // NOI18N
        cityLabel.setText("City:");

        cityField.setFont(new java.awt.Font("Nirmala UI", 0, 12)); // NOI18N
        cityField.setBorder(javax.swing.BorderFactory.createMatteBorder(0, 0, 1, 0, new java.awt.Color(0, 0, 0)));

        streetLabel.setFont(new java.awt.Font("Nirmala UI", 1, 12)); // NOI18N
        streetLabel.setText("Street:");

        stField.setFont(new java.awt.Font("Nirmala UI", 0, 12)); // NOI18N
        stField.setBorder(javax.swing.BorderFactory.createMatteBorder(0, 0, 1, 0, new java.awt.Color(0, 0, 0)));
        stField.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                stFieldActionPerformed(evt);
            }
        });

        buildingLabel.setFont(new java.awt.Font("Nirmala UI", 1, 12)); // NOI18N
        buildingLabel.setText("Building:");

        buildField.setFont(new java.awt.Font("Nirmala UI", 0, 12)); // NOI18N
        buildField.setBorder(javax.swing.BorderFactory.createMatteBorder(0, 0, 1, 0, new java.awt.Color(0, 0, 0)));

        fnameField.setFont(new java.awt.Font("Nirmala UI", 0, 12)); // NOI18N
        fnameField.setBorder(javax.swing.BorderFactory.createMatteBorder(0, 0, 1, 0, new java.awt.Color(0, 0, 0)));

        lnameField.setFont(new java.awt.Font("Nirmala UI", 0, 12)); // NOI18N
        lnameField.setBorder(javax.swing.BorderFactory.createMatteBorder(0, 0, 1, 0, new java.awt.Color(0, 0, 0)));

        phoneField.setFont(new java.awt.Font("Nirmala UI", 0, 12)); // NOI18N
        phoneField.setBorder(javax.swing.BorderFactory.createMatteBorder(0, 0, 1, 0, new java.awt.Color(0, 0, 0)));
        phoneField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                phoneFieldKeyTyped(evt);
            }
        });

        birthField.setFont(new java.awt.Font("Nirmala UI", 0, 12)); // NOI18N
        birthField.setBorder(javax.swing.BorderFactory.createMatteBorder(0, 0, 1, 0, new java.awt.Color(0, 0, 0)));

        updateBtn.setBackground(new java.awt.Color(230, 57, 70));
        updateBtn.setFont(new java.awt.Font("Nirmala UI", 1, 12)); // NOI18N
        updateBtn.setForeground(new java.awt.Color(241, 250, 238));
        updateBtn.setText("Update");
        updateBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                updateBtnActionPerformed(evt);
            }
        });

        browseBtn.setBackground(new java.awt.Color(230, 57, 70));
        browseBtn.setFont(new java.awt.Font("Nirmala UI", 1, 12)); // NOI18N
        browseBtn.setForeground(new java.awt.Color(241, 250, 238));
        browseBtn.setText("Browse");
        browseBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                browseBtnActionPerformed(evt);
            }
        });

        savepBtn.setBackground(new java.awt.Color(230, 57, 70));
        savepBtn.setFont(new java.awt.Font("Nirmala UI", 1, 12)); // NOI18N
        savepBtn.setForeground(new java.awt.Color(241, 250, 238));
        savepBtn.setText("Save");
        savepBtn.setMaximumSize(new java.awt.Dimension(67, 23));
        savepBtn.setMinimumSize(new java.awt.Dimension(67, 23));
        savepBtn.setPreferredSize(new java.awt.Dimension(67, 23));
        savepBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                savepBtnActionPerformed(evt);
            }
        });

        jLabel1.setFont(new java.awt.Font("Nirmala UI", 1, 18)); // NOI18N
        jLabel1.setText("Member Type");

        buttonGroup1.add(jRadioButton1);
        jRadioButton1.setFont(new java.awt.Font("Nirmala UI", 1, 11)); // NOI18N
        jRadioButton1.setText("Free");
        jRadioButton1.setFocusable(false);
        jRadioButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jRadioButton1ActionPerformed(evt);
            }
        });

        buttonGroup1.add(jRadioButton2);
        jRadioButton2.setFont(new java.awt.Font("Nirmala UI", 1, 11)); // NOI18N
        jRadioButton2.setText("Regular");
        jRadioButton2.setFocusable(false);

        jLabel2.setBackground(new java.awt.Color(255, 255, 255));
        jLabel2.setForeground(new java.awt.Color(255, 255, 255));
        jLabel2.setText("jLabel2");

        jLabel3.setBackground(new java.awt.Color(255, 255, 255));
        jLabel3.setForeground(new java.awt.Color(255, 255, 255));
        jLabel3.setText("jLabel3");

        javax.swing.GroupLayout profilePanelLayout = new javax.swing.GroupLayout(profilePanel);
        profilePanel.setLayout(profilePanelLayout);
        profilePanelLayout.setHorizontalGroup(
            profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jSeparator10)
            .addComponent(jSeparator9)
            .addGroup(profilePanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(profilePanelLayout.createSequentialGroup()
                        .addComponent(jLabel39)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(updateBtn, javax.swing.GroupLayout.PREFERRED_SIZE, 112, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(77, 77, 77))
                    .addGroup(profilePanelLayout.createSequentialGroup()
                        .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(profilePanelLayout.createSequentialGroup()
                                .addComponent(jLabel34, javax.swing.GroupLayout.PREFERRED_SIZE, 101, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(profilePanelLayout.createSequentialGroup()
                                        .addComponent(jLabel35)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(fnameField, javax.swing.GroupLayout.PREFERRED_SIZE, 115, javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addGroup(profilePanelLayout.createSequentialGroup()
                                        .addComponent(jLabel36)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(lnameField, javax.swing.GroupLayout.PREFERRED_SIZE, 117, javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addGroup(profilePanelLayout.createSequentialGroup()
                                        .addComponent(phoneLabel)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(phoneField, javax.swing.GroupLayout.PREFERRED_SIZE, 107, javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addGroup(profilePanelLayout.createSequentialGroup()
                                        .addComponent(jLabel38)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(birthField, javax.swing.GroupLayout.PREFERRED_SIZE, 110, javax.swing.GroupLayout.PREFERRED_SIZE))))
                            .addComponent(jLabel44)
                            .addGroup(profilePanelLayout.createSequentialGroup()
                                .addComponent(cityLabel)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(cityField, javax.swing.GroupLayout.PREFERRED_SIZE, 86, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(27, 27, 27)
                                .addComponent(streetLabel)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(stField, javax.swing.GroupLayout.PREFERRED_SIZE, 99, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(35, 35, 35)
                                .addComponent(buildingLabel)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(buildField, javax.swing.GroupLayout.PREFERRED_SIZE, 99, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(browseBtn, javax.swing.GroupLayout.PREFERRED_SIZE, 101, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(savepBtn, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addContainerGap(335, Short.MAX_VALUE))
                    .addGroup(profilePanelLayout.createSequentialGroup()
                        .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(userLabel)
                            .addComponent(jLabel40, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(emailLabel)
                            .addComponent(passLabel)
                            .addComponent(passField)
                            .addComponent(emailField)
                            .addComponent(userField))
                        .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(profilePanelLayout.createSequentialGroup()
                                .addGap(178, 178, 178)
                                .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel1)
                                    .addComponent(jRadioButton1)
                                    .addComponent(jRadioButton2))
                                .addGap(0, 0, Short.MAX_VALUE))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, profilePanelLayout.createSequentialGroup()
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, profilePanelLayout.createSequentialGroup()
                                        .addComponent(jLabel2)
                                        .addGap(248, 248, 248))
                                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, profilePanelLayout.createSequentialGroup()
                                        .addComponent(jLabel3)
                                        .addGap(75, 75, 75))))))))
        );
        profilePanelLayout.setVerticalGroup(
            profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(profilePanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(updateBtn, javax.swing.GroupLayout.PREFERRED_SIZE, 33, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel39))
                .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(profilePanelLayout.createSequentialGroup()
                        .addGap(19, 19, 19)
                        .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel35)
                            .addComponent(fnameField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel36)
                            .addComponent(lnameField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(phoneLabel)
                            .addComponent(phoneField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel38)
                            .addComponent(birthField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(profilePanelLayout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel34, javax.swing.GroupLayout.PREFERRED_SIZE, 118, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(browseBtn, javax.swing.GroupLayout.PREFERRED_SIZE, 29, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(profilePanelLayout.createSequentialGroup()
                        .addComponent(jSeparator9, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(2, 2, 2)
                        .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel40)
                            .addComponent(jLabel1))
                        .addGap(18, 18, 18)
                        .addComponent(userLabel)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(userField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(profilePanelLayout.createSequentialGroup()
                        .addComponent(jRadioButton1)
                        .addGap(8, 8, 8)
                        .addComponent(jRadioButton2)))
                .addGap(14, 14, 14)
                .addComponent(emailLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(emailField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel2))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(passLabel)
                    .addComponent(jLabel3))
                .addGap(4, 4, 4)
                .addComponent(passField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(jSeparator10, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel44)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(profilePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(cityLabel)
                    .addComponent(cityField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(streetLabel)
                    .addComponent(stField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(buildingLabel)
                    .addComponent(buildField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addComponent(savepBtn, javax.swing.GroupLayout.PREFERRED_SIZE, 33, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(30, Short.MAX_VALUE))
        );

        getContentPane().add(profilePanel, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, -1, -1));

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void emailFieldActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_emailFieldActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_emailFieldActionPerformed

    private void stFieldActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_stFieldActionPerformed
        // TODO add your handling code here:

    }//GEN-LAST:event_stFieldActionPerformed

    private void updateBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_updateBtnActionPerformed
        // TODO add your handling code here:
        updateBtn.setVisible(false);
        savepBtn.setVisible(true);
        browseBtn.setVisible(true);

        fnameField.setEditable(false);
        lnameField.setEditable(false);
        phoneField.setEditable(true);
        birthField.setEditable(false);
        userField.setEditable(true);
        passField.setEditable(true);
        emailField.setEditable(true);
        cityField.setEditable(true);
        stField.setEditable(true);
        buildField.setEditable(true);

    }//GEN-LAST:event_updateBtnActionPerformed

    private void browseBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_browseBtnActionPerformed
        // TODO add your handling code here:
        JFileChooser file = new JFileChooser();
        file.setCurrentDirectory ( new File ( System.getProperty("user.home")));
        FileNameExtensionFilter filter = new FileNameExtensionFilter("*.images","jpg","gif","png","bmp","jpeg");
        file.addChoosableFileFilter(filter); 
        int result = file.showSaveDialog(null);
        if ( result == JFileChooser.APPROVE_OPTION){
            File selectedFile = file.getSelectedFile();
            
            String path = selectedFile.getAbsolutePath();
            iPath=path;
            ImageIcon myImage  = new ImageIcon(path);
            Image img = myImage.getImage();
            Image newImg = img.getScaledInstance(jLabel34.getWidth(), jLabel34.getHeight(), Image.SCALE_SMOOTH);
            ImageIcon image = new ImageIcon(newImg);
            jLabel34.setIcon(image);
        }
    }//GEN-LAST:event_browseBtnActionPerformed

    private void savepBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_savepBtnActionPerformed
        // TODO add your handling code here:
        String pNumber=phoneField.getText();
        String username=userField.getText();
        String pass=passField.getText();
        String email=emailField.getText();
        String regex =  "^[\\w!#$%&’*+/=?`{|}~^-]+(?:\\.[\\w!#$%&’*+/=?`{|}~^-]+)*@(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,6}$";
        Pattern pattern = Pattern.compile(regex);
        Matcher matcher = pattern.matcher(email);
        String city=cityField.getText();
        String build=buildField.getText();
        String street=stField.getText();
        if(pNumber.isEmpty()&&pNumber.startsWith(" "))
        {
            JOptionPane.showMessageDialog(null, "Enter Phone Number");
        }
        else if(username.isEmpty()&&username.startsWith(" "))
        {
            JOptionPane.showMessageDialog(null, "Enter Username");
        }
        else if(pass.isEmpty()&&pass.startsWith(" "))
        {
            JOptionPane.showMessageDialog(null, "Enter Username");
        }
        else if(matcher.matches())
        {
            try
            {
                if(!pass.equals(jLabel2.getText()))
                    pass=getMd5(pass);
                if(city.isEmpty()&&city.startsWith(" "))
                    city=null;
                if(build.isEmpty()&&build.startsWith(" "))
                    build=null;
                if(street.isEmpty()&&street.startsWith(" "))
                    street=null;
                Connection con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:oracle","library","123456"); 
                String sql="update PERSON1 set USERNAME='"+username+"',PASWORD='"+pass+"',EMAIL='"+email+"',CITY='"+city+"',BUILDING='"+build+"',"
                        + "STREET='"+street+"',PHONENUMBER="+Integer.parseInt(pNumber)+" where ID='"+jLabel3.getText()+"'";
                String sql2="";
                System.out.println(iPath);
                if(iPath.isEmpty()||iPath.startsWith(" ")||iPath.equals(iPath2))
                {
                    sql2="update IMAGES set IMAGE_PATH='"+iPath2+"' where IMAGE_ID='"+jLabel3.getText()+"'";
                }
                else 
                    sql2="update IMAGES set IMAGE_PATH='"+iPath+"' where IMAGE_ID='"+jLabel3.getText()+"'";
                String memtype="";
                if(jRadioButton1.isSelected())
                {   
                    memtype="Free";
                    System.out.print("FREE");
                }
               
                else
                {
                    System.out.print("reg");
                    memtype="Regular";
                }
                    
                String sql3= "update MEMBER SET MEM_TYPE='"+memtype+"' where MEMBERID='"+jLabel3.getText()+"'";
                PreparedStatement ps2=con.prepareStatement(sql2);
                ResultSet rs2=ps2.executeQuery();
                PreparedStatement ps=con.prepareStatement(sql);
                ResultSet rs=ps.executeQuery();
                PreparedStatement ps3=con.prepareStatement(sql3);
                ResultSet rs3=ps3.executeQuery();
            }
            catch(Exception e)
            {
                JOptionPane.showMessageDialog(null, e.getMessage());
                
            }
        }
       
        updateBtn.setVisible(true);
        savepBtn.setVisible(false);
        browseBtn.setVisible(false);
        
        fnameField.setEditable(false);
        lnameField.setEditable(false);
        phoneField.setEditable(false);
        birthField.setEditable(false);
        userField.setEditable(false);
        passField.setEditable(false);
        emailField.setEditable(false);
        cityField.setEditable(false);
        stField.setEditable(false);
        buildField.setEditable(false);
        updateBtn.setVisible(true);
        savepBtn.setVisible(false);
        browseBtn.setVisible(false);

        fnameField.setEditable(false);
        lnameField.setEditable(false);
        phoneField.setEditable(false);
        birthField.setEditable(false);
        userField.setEditable(false);
        passField.setEditable(false);
        emailField.setEditable(false);
        cityField.setEditable(false);
        stField.setEditable(false);
        buildField.setEditable(false);
    }//GEN-LAST:event_savepBtnActionPerformed

    private void jRadioButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jRadioButton1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jRadioButton1ActionPerformed

    private void phoneFieldKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_phoneFieldKeyTyped
        // TODO add your handling code here:
        char c = evt.getKeyChar();
        if(!(Character.isDigit(c))||(c==KeyEvent.VK_BACKSPACE) || (c==KeyEvent.VK_DELETE))
            evt.consume();
    }//GEN-LAST:event_phoneFieldKeyTyped

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(profileJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(profileJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(profileJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(profileJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new profileJFrame().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTextField birthField;
    private javax.swing.JButton browseBtn;
    private javax.swing.JTextField buildField;
    private javax.swing.JLabel buildingLabel;
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.JTextField cityField;
    private javax.swing.JLabel cityLabel;
    private javax.swing.JTextField emailField;
    private javax.swing.JLabel emailLabel;
    private javax.swing.JTextField fnameField;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel34;
    private javax.swing.JLabel jLabel35;
    private javax.swing.JLabel jLabel36;
    private javax.swing.JLabel jLabel38;
    private javax.swing.JLabel jLabel39;
    private javax.swing.JLabel jLabel40;
    private javax.swing.JLabel jLabel44;
    private javax.swing.JRadioButton jRadioButton1;
    private javax.swing.JRadioButton jRadioButton2;
    private javax.swing.JSeparator jSeparator10;
    private javax.swing.JSeparator jSeparator9;
    private javax.swing.JTextField lnameField;
    private javax.swing.JPasswordField passField;
    private javax.swing.JLabel passLabel;
    private javax.swing.JTextField phoneField;
    private javax.swing.JLabel phoneLabel;
    private javax.swing.JPanel profilePanel;
    private javax.swing.JButton savepBtn;
    private javax.swing.JTextField stField;
    private javax.swing.JLabel streetLabel;
    private javax.swing.JButton updateBtn;
    private javax.swing.JTextField userField;
    private javax.swing.JLabel userLabel;
    // End of variables declaration//GEN-END:variables
}
